# 켄트 벡의 구현 패턴

# 2 패턴

패턴은 시간과 에너지를 줄여준다. 

예를 들어 침대에 잠자리를 펴는 과정을 생각해보자. 매번 잠자리를 펴는 방법을 고민하는 것보다는, 평상시 
습관대로 준비하는 편이 훨씬 적은 노력이 든다. 이 경우 여러분은 작업을 크게 단순화 해주는 침구 준비 패턴을 갖고 있는 것이다.

패턴 사용을 습과화하면, 루프 작성 같은 일에 대해 고민하지 않아도 된다.

------

# 3 프로그래밍 이론

3가지 이론  - 가치, 원칙, 패턴

패턴 - 균형있는 개발 스타일

가치 - 패턴을 사용해야하는 동기를 알려줌

원칙 - 동기를 행동으로 어떻게 바꿔줄지를 알려줌


## 가치

>공통적인 가치는 커뮤니케이션, 단숭성, 유연성임
프로그램의 확장성을 고려하며, 불필요한 요소를 사용하지 않고, 읽고 이해하기 쉬운 프로그램코드를 작성한다.

### 커뮤니케이션

커뮤니케니션이란 개발자가 코드를 쉽게 이해하고, 수정하고, 사용하는 것

프로그램도 책처럼 줄거리가 있어야 하며 리듬감을 지니고 상큼한 표현 등을 지녀야 한다.

커뮤니케이션에 관심을 기울이다 보면 좀더 현실적인 관점에서 코드를 짜게 된다. 우선 더 많은 생각을 하며 코드를 짜기 대문에 코드가 좋아진다. 
"다른 사람이 이걸 보면 어떤 생각을 할까?"라는 생각을 하면 내 자신과 컴퓨터만 생각하며 코드를 짤 떄와는 다른 신경세포가 내 머릿속에서 동작한다.

### 단순성

복잡도를 낮추면 프로그램을 읽고 사용하고 수정하는 사람들이 프로그램을 훨씬 빨리 이해할 수 있다.
프로그래밍을 할 때 해야 할 일 중 하나는 지금까지 짜 놓은 코드를 보고 불필요한 부분을 제거하는 것이다.

커뮤니케이션과 단순성은 떄로 서로 협업관계에 있다. 복잡도가 과하지 않다면 시스템을 이해하기 쉽다. 또한 커뮤니케이션에 신경을 쓸 수록
, 현재 어떤부분이 과도하게 복잡한지 알기도 쉽다. 하지만 때로는 단순화로 인해 프로그램을 이해하기 어려워지는 경우도 있다.

### 유연성

유연성은 비효율적인 코딩이나 설계를 정당화해주는 가치이다.

프로그램 개발 비용은 대부분 처음 작성된 후부터 들어간다는 점을 생각해볼 때, 프로그램 수정은 가급적 쉬워야 한다. 하지만 당장 필요할
것 같다고 생각했던 유연성이 사실 필요하지 않은 것으로 판명나는 경우도 많다. 따라서 추측에 의거해 설계에 유연성을 부여하는 것보다는 단순성
을 유연하게 적용한 후 테스트를 철저하게 하는 편이 더욱 효과적이다.

유연성은 복잡도를 증가시킨다.

커뮤니케이션을 중시하면 유연성도 좋아진다.

이후 다룰 패턴들을 활용해 프로그래머는 더욱 단순하고 이해하기 쉬우면서 수정이 쉬운 코드를 작성하고, 결국 유연성을 높일 수 있게 된다.

## 원칙

구현패턴은 그냥 나온 것이 아니다. 각 패턴은 커뮤니케이션, 단순성, 유연성의 가치 중 하나 이상을 내포하고 있다.

원칙을 이해하고 있다면 패턴을 사용하는 근본적인 이유에 대해 알 수 있으므로 새로운 상황에 부딪혔을 때 적절히 대처할 수 있다.

### 지역적 변화

코드를 수정할 때 함께 바꿔야 하는 부분을 최소화하라. 프로그램의 특정 부분을 수정시 다른 부분에서 문제를 일으킨다면, 비용이 커지게 된다.
지역적 변화만을 일으키는 코드는 커뮤니케이션이 쉽다. 프로그램 전체를 알 필요 없이 그 부분만 보고 이해가 가능하기 때문이다.

구현 패턴을 사용하는 중요한 이유는 프로그램 수정 비용을 낮추기 위함이므로, 지역적 변화의 원칙은 여러 패턴의 근간이 된다.

### 최소 중복

지역적 변화를 돕는 다른 원칙은 최소 중복의 원칙이다.

같은 코드가 여러 곳에서 반복된다면, 다른 중복된 코드들도 모두 바꿔야 할지 여부를 결정해야한다.

중복을 없애는 한 가지 방법은 프로그램을 여러 작은 부분-짧은 구문, 짧은 메소드, 작은 객체, 작은 패키지-으로 나누는 것이다.
커다란 로직은 다른 커다란 로직의 일부를 사용하는 경우가 많다. 이러한 공통 부분이 존재하는 경우 패턴을 사용할 수 있다.

### 로직과 데이터의 결합

로직과 데이터를 함께 유지하는 것이다.

데이터와 그 데이터를 처리하는 로직을 밀접하게-가급적 같은 메소드 혹은 같은 객체 내에, 최소한 같은 패키지 내부에 - 배치하라.

### 대칭성

프로그램에서 대칭성은 여러곳에 존재한다.

add() 메소드가 있는 곳에는 remove() 메소드가 있다. 같은 파라미터를 사용하는 여러 개의 메소드가 있는 경우도 많다. 프로그램에서 대칭성을
찾아내서 명확히 표현해주면, 코드를 읽기 수월해진다. 프로그램의 절반만 이해하면 나머지 절반은 자연스럽게 이해되기 때문이다.

대칭성이 없는 코드

```java
void process() {
    input();
    count++;
    output();
}
```

대칭성을 적용한 코드(어디서?)

```java
void process() {
    input();
    tally();
    output();
}
```

### 선언적 표현

?? 다시 찾아보기


### 변화율

함께 변하는 로직과 데이터를 함께 관리하고, 변화율이 다른 로직과 데이터는 분리하는 것이다.

변화율은 시간적 대칭성으로 볼 수 있다.

예를 들어 세금 관련 코드를 작성한다면, 일반 세금 계산 루틴을 특정 년도 세금 계산 루틴과 별도로 구현할 것이다. 코드의 변화율이 다르기 때문이다.
연도별 세금 계산을 별도로 분리해서 구현을 하게 되면 코드 수정에 대한 영향을 제한 할 수 있다.

변화율은 데이터에도 적용된다. 하나의 객체에 있는 모든 필드는 가급적 함께 변해야 한다. 예를 들어 특정 메소드가 수행될 때만 사용되는
필드는 그 메소드의 지역 변수로 선언되어야 한다.

# 5 클래스

## 클래스

클래스는 잠재적으로 여러 세부 사항을 내포할 수 있으므로, 클래스의 사용은 커뮤니케이션을 위한 프로그램에 있어 매우 중요하다.
실제 구현 패턴에서 가장 많은 양을 차지하는 것이 클래스 구현 패턴이다.

클래스를 사용하는 이유는 데이터가 로직에 비해 빈번하게 변화하기 때문이다. 클래스의 로직과 데이터는 함께 사용되며, 로직은 데이터에 비해 변화율이 낮다.

클래스 계층을 구성하는 것은 일종의 압축 기법을 사용하는 것이다. 클래스 계층의 사용은 상위클래스의 코드를 모두 하위크래스에 붙여 넣는
것 과 같은 효과를 가져온다. 이를 사용하면 코드를 읽기 어려워진다. 하위클래스를 이해하기 위해서는 상위클래스도 이해해야하기 때문이다.

## 추상 인터페이스

구현이 아니라 역할(인터페이스)에 맞춰 코딩하라는 말이 있다. (역할과 구현을 분리하라) 이는 설계상의 결정을 필요 이상으로 노출하지
말라는 뜻이다.

인터페이스 추가에는 비용이 발생한다. 따라서 인터페이스를 통해 유연성을 얻을 수 있는 경우에만 인터페이스에 비용을 지불해야한다.

## 인터페이스

인터페이스를 사용하는 것은 "여기까지가 내가 원하는 것이고, 이외의 내용은 상관하지 않는다"라고 얘기하는 것과 같다.
인터페이스는 필드를 배제하고 연산만을 나타내므로 사용자는 구현이 변경되더라도 신경 쓸 필요가 없다.

인터페이스에 이름을 짓는 방법은 크게 두가지가 있다.
인터페이스를 구현이 빠져있는 클래스로 간주할 경우 클래스와 같은 방법을 사용해서 이름을 지으면 된다.
하지만 때로는 구상 클래스의 이름을 간결하게 짓는 것이 인터페이스 사용을 숨기는 것보다 코드 커뮤니케이션에 있어 중요한 경우가 있다.
이럴 경우에는 이름에 "I"를 붙이면 된다.

## 추상 클래스

추상클래스와 자바 인터페이스의 장단점은 인터페이스 수정이 용이성과 단일 클래스가 여러 인터페이스를 지원할 수 있는지 여부로 귀결된다.
추상 인터페이스를 수정하려면 구현과 인터페이스를 수정해야 한다. 인터페이스를 고치면 구현한 모든 클래스도 따라 고쳐야 한다. 즉 수정에 매우 
취약하다.

추상 클래스는 기존 설계를 망가뜨리지 않고 새로운 연산을 얼마든지 추가할 수 있다.